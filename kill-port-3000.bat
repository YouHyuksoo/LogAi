@echo off
REM ==============================================================================
REM kill-port-3000.bat
REM ==============================================================================
REM 3000번 포트를 사용하는 프로세스를 강제 종료합니다.
REM
REM 사용법:
REM   kill-port-3000.bat
REM
REM 주의사항:
REM   - 관리자 권한 없이도 실행 가능
REM   - Frontend 개발 서버(npm run dev)가 종료됩니다
REM ==============================================================================

echo ========================================
echo 3000번 포트 사용 프로세스 검색 중...
echo ========================================

REM 3000번 포트를 사용하는 프로세스 PID 찾기
for /f "tokens=5" %%a in ('netstat -ano ^| findstr :3000 ^| findstr LISTENING') do (
    set PID=%%a
)

REM PID가 없으면 종료
if "%PID%"=="" (
    echo.
    echo [INFO] 3000번 포트를 사용하는 프로세스가 없습니다.
    echo.
    pause
    exit /b 0
)

echo.
echo [발견] 3000번 포트를 사용하는 프로세스 PID: %PID%
echo.

REM 프로세스 정보 출력
echo ========================================
echo 프로세스 정보:
echo ========================================
tasklist /FI "PID eq %PID%"
echo.

REM 프로세스 강제 종료
echo ========================================
echo 프로세스 종료 중...
echo ========================================
taskkill /PID %PID% /F

if %ERRORLEVEL% EQU 0 (
    echo.
    echo [성공] 3000번 포트 프로세스가 종료되었습니다.
    echo.
) else (
    echo.
    echo [오류] 프로세스 종료에 실패했습니다.
    echo 관리자 권한으로 다시 시도해주세요.
    echo.
)

pause
